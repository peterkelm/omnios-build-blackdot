## Core Configuration
ServerName	localhost
ServerAdmin	admin@localhost

## Modules
Use LoadModule	authn_file_module		mod_authn_file.so
#Use LoadModule	authn_dbm_module		mod_authn_dbm.so
#Use LoadModule	authn_anon_module		mod_authn_anon.so
#Use LoadModule	authn_dbd_module		mod_authn_dbd.so
#Use LoadModule	authn_socache_module		mod_authn_socache.so
Use LoadModule	authn_core_module		mod_authn_core.so
Use LoadModule	authz_host_module		mod_authz_host.so
Use LoadModule	authz_groupfile_module		mod_authz_groupfile.so
Use LoadModule	authz_user_module		mod_authz_user.so
#Use LoadModule	authz_dbm_module		mod_authz_dbm.so
#Use LoadModule	authz_owner_module		mod_authz_owner.so
#Use LoadModule	authz_dbd_module		mod_authz_dbd.so
Use LoadModule	authz_core_module		mod_authz_core.so
#Use LoadModule	authnz_ldap_module		mod_authnz_ldap.so
Use LoadModule	access_compat_module		mod_access_compat.so
Use LoadModule	auth_basic_module		mod_auth_basic.so
#Use LoadModule	auth_form_module		mod_auth_form.so
Use LoadModule	auth_digest_module		mod_auth_digest.so
#Use LoadModule	allowmethods_module		mod_allowmethods.so
#Use LoadModule	isapi_module			mod_isapi.so
#Use LoadModule	file_cache_module		mod_file_cache.so
#Use LoadModule	cache_module			mod_cache.so
#Use LoadModule	cache_disk_module		mod_cache_disk.so
#Use LoadModule	cache_socache_module		mod_cache_socache.so
#Use LoadModule	socache_shmcb_module		mod_socache_shmcb.so
#Use LoadModule	socache_dbm_module		mod_socache_dbm.so
#Use LoadModule	socache_memcache_module		mod_socache_memcache.so
#Use LoadModule	watchdog_module			mod_watchdog.so
#Use LoadModule	dbd_module			mod_dbd.so
#Use LoadModule	dumpio_module			mod_dumpio.so
#Use LoadModule	buffer_module			mod_buffer.so
#Use LoadModule	data_module			mod_data.so
#Use LoadModule	ratelimit_module		mod_ratelimit.so
#Use LoadModule	reqtimeout_module		mod_reqtimeout.so
#Use LoadModule	ext_filter_module		mod_ext_filter.so
#Use LoadModule	request_module			mod_request.so
#Use LoadModule	include_module			mod_include.so
#Use LoadModule	filter_module			mod_filter.so
#Use LoadModule	reflector_module		mod_reflector.so
#Use LoadModule	substitute_module		mod_substitute.so
#Use LoadModule	sed_module			mod_sed.so
#Use LoadModule	charset_lite_module		mod_charset_lite.so
#Use LoadModule	deflate_module			mod_deflate.so
#Use LoadModule	xml2enc_module			mod_xml2enc.so
#Use LoadModule	proxy_html_module		mod_proxy_html.so
Use LoadModule	mime_module			mod_mime.so
#Use LoadModule	ldap_module			mod_ldap.so
Use LoadModule	log_config_module		mod_log_config.so
#Use LoadModule	log_debug_module		mod_log_debug.so
#Use LoadModule	log_forensic_module		mod_log_forensic.so
#Use LoadModule	logio_module			mod_logio.so
#Use LoadModule	env_module			mod_env.so
#Use LoadModule	mime_magic_module		mod_mime_magic.so
#Use LoadModule	cern_meta_module		mod_cern_meta.so
#Use LoadModule	expires_module			mod_expires.so
Use LoadModule	headers_module			mod_headers.so
#Use LoadModule	ident_module			mod_ident.so
#Use LoadModule	usertrack_module		mod_usertrack.so
#Use LoadModule	unique_id_module		mod_unique_id.so
Use LoadModule	setenvif_module			mod_setenvif.so
#Use LoadModule	version_module			mod_version.so
#Use LoadModule	remoteip_module			mod_remoteip.so
#Use LoadModule	proxy_module			mod_proxy.so
#Use LoadModule	proxy_connect_module		mod_proxy_connect.so
#Use LoadModule	proxy_ftp_module		mod_proxy_ftp.so
#Use LoadModule	proxy_http_module		mod_proxy_http.so
#Use LoadModule	proxy_fcgi_module		mod_proxy_fcgi.so
#Use LoadModule proxy_scgi_module		mod_proxy_scgi.so
#Use LoadModule	proxy_wstunnel_module		mod_proxy_wstunnel.so
#Use LoadModule	proxy_ajp_module		mod_proxy_ajp.so
#Use LoadModule	proxy_balancer_module		mod_proxy_balancer.so
#Use LoadModule	proxy_express_module		mod_proxy_express.so
#Use LoadModule	session_module			mod_session.so
#Use LoadModule	session_cookie_module		mod_session_cookie.so
#Use LoadModule	session_dbd_module		mod_session_dbd.so
#Use LoadModule	slotmem_shm_module		mod_slotmem_shm.so
#Use LoadModule	slotmem_plain_module		mod_slotmem_plain.so
Use LoadModule	ssl_module			mod_ssl.so
#Use LoadModule	optional_hook_export_module	mod_optional_hook_export.so
#Use LoadModule	optional_hook_import_module	mod_optional_hook_import.so
#Use LoadModule	optional_fn_import_module	mod_optional_fn_import.so
#Use LoadModule	optional_fn_export_module 	mod_optional_fn_export.so
#Use LoadModule	dialup_module			mod_dialup.so
#Use LoadModule	lbmethod_byrequests_module	mod_lbmethod_byrequests.so
#Use LoadModule	lbmethod_bytraffic_module	mod_lbmethod_bytraffic.so
#Use LoadModule	lbmethod_bybusyness_module	mod_lbmethod_bybusyness.so
#Use LoadModule	lbmethod_heartbeat_module	mod_lbmethod_heartbeat.so
Use LoadModule	unixd_module			mod_unixd.so
<IfModule !mpm_prefork_module>
 	#Use LoadModule privileges_module	mod_privileges.so
<IfModule>
#Use LoadModule	heartbeat_module		mod_heartbeat.so
#Use LoadModule	heartmonitor_module		mod_heartmonitor.so
#Use LoadModule	dav_module			mod_dav.so
#Use LoadModule	status_module			mod_status.so
#Use LoadModule	autoindex_module		mod_autoindex.so
#Use LoadModule	asis_module			mod_asis.so
#Use LoadModule	info_module			mod_info.so
#Use LoadModule	suexec_module			mod_suexec.so
#Use LoadModule	cgid_module			mod_cgid.so
#Use LoadModule	cgi_module			mod_cgi.so
#Use LoadModule	dav_fs_module			mod_dav_fs.so
#Use LoadModule	dav_lock_module			mod_dav_lock.so
#Use LoadModule	vhost_alias_module		mod_vhost_alias.so
#Use LoadModule	negotiation_module		mod_negotiation.so
Use LoadModule	dir_module			mod_dir.so
#Use LoadModule	imagemap_module			mod_imagemap.so
Use LoadModule	actions_module			mod_actions.so
#Use LoadModule	speling_module			mod_speling.so
#Use LoadModule	userdir_module			mod_userdir.so
Use LoadModule	alias_module			mod_alias.so
Use LoadModule	rewrite_module			mod_rewrite.so

## mpm configuration
<IfModule unixd_module>
	User apache
	Group apache
</IfModule>

<IfModule !mpm_netware_module>
    PidFile "var/run/httpd.pid"
</IfModule>

<IfModule mpm_prefork_module>
    StartServers             5
    MinSpareServers          5
    MaxSpareServers         10
    MaxRequestWorkers      150
    MaxConnectionsPerChild   0
</IfModule>

<IfModule mpm_worker_module>
    StartServers             2
    MinSpareThreads         25
    MaxSpareThreads         75
    ThreadsPerChild         25
    MaxRequestWorkers      150
    MaxConnectionsPerChild   0
</IfModule>

<IfModule mpm_event_module>
    StartServers             2
    MinSpareThreads         50
    MaxSpareThreads        150
    ThreadsPerChild         50
    MaxRequestWorkers      150
    MaxConnectionsPerChild  50
</IfModule>

<IfModule !mpm_netware_module>
 	MaxMemFree            2048
</IfModule>

## main configuration
<Directory />
    AllowOverride none
    Require all denied
</Directory>

Timeout 120
KeepAlive On
MaxKeepAliveRequests 100
KeepAliveTimeout 30
UseCanonicalName Off

AccessFileName .htaccess

ServerTokens Minor
ServerSignature Off

HostnameLookups Off

<IfModule reqtimeout_module>
	RequestReadTimeout header=20-40,MinRate=500 body=20,MinRate=500
</IfModule>

<IfModule dir_module>
    DirectoryIndex index.php index.html index.htm index.cgi index.pl
</IfModule>

<Files ".ht*">
    Require all denied
</Files>

ErrorLog "var/logs/error_log"
LogLevel error

<IfModule log_config_module>
	LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
	LogFormat "%h %l %u %t \"%r\" %>s %b" common
	<IfModule logio_module>
		LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
	</IfModule>
</IfModule>

<IfModule mime_module>
	TypesConfig conf/mime.types

	AddType application/x-compress .Z
	AddType application/x-gzip .gz .tgz
</IfModule>

<IfModule mime_magic_module>
	MIMEMagicFile conf/magic
</IfModule>

<IfModule autoindex_module>
	<IfModule alias_module>
		IndexOptions FancyIndexing HTMLTable VersionSort FoldersFirst XHTML

		Alias /icons/ "{{PREFIX}}/share/icons"

		<Directory "{{PREFIX}}/share/icons">
			Options Indexes MultiViews
			AllowOverride None
			Require all granted
		</Directory>

		AddIconByEncoding (CMP,/icons/compressed.gif) x-compress x-gzip

		AddIconByType (TXT,/icons/text.gif) text/*
		AddIconByType (IMG,/icons/image2.gif) image/*
		AddIconByType (SND,/icons/sound2.gif) audio/*
		AddIconByType (VID,/icons/movie.gif) video/*

		AddIcon /icons/binary.gif .bin .exe
		AddIcon /icons/binhex.gif .hqx
		AddIcon /icons/tar.gif .tar
		AddIcon /icons/world2.gif .wrl .wrl.gz .vrml .vrm .iv
		AddIcon /icons/compressed.gif .Z .z .tgz .gz .zip
		AddIcon /icons/a.gif .ps .ai .eps
		AddIcon /icons/layout.gif .html .shtml .htm .pdf
		AddIcon /icons/text.gif .txt
		AddIcon /icons/c.gif .c
		AddIcon /icons/p.gif .pl .py
		AddIcon /icons/f.gif .for
		AddIcon /icons/dvi.gif .dvi
		AddIcon /icons/uuencoded.gif .uu
		AddIcon /icons/script.gif .conf .sh .shar .csh .ksh .tcl
		AddIcon /icons/tex.gif .tex
		AddIcon /icons/bomb.gif core

		AddIcon /icons/back.gif ..
		AddIcon /icons/hand.right.gif README
		AddIcon /icons/folder.gif ^^DIRECTORY^^
		AddIcon /icons/blank.gif ^^BLANKICON^^

		DefaultIcon /icons/unknown.gif

		ReadmeName README.html
		HeaderName HEADER.html

		IndexIgnore .??* *~ *# HEADER* README* RCS CVS *,v *,t
	</IfModule>
</IfModule>

<IfModule deflate_module>
	<IfModule headers_module>
		<Location />
			SetOutputFilter DEFLATE

			# Netscape 4.x has some problems...
			BrowserMatch ^Mozilla/4 gzip-only-text/html

			# Netscape 4.06-4.08 have some more problems
			BrowserMatch ^Mozilla/4\.0[678] no-gzip

			# MSIE masquerades as Netscape, but it is fine
			BrowserMatch \bMSIE !no-gzip !gzip-only-text/html

			# Don't compress images
			SetEnvIfNoCase Request_URI \
				\.(?:gif|jpe?g|png)$ no-gzip dont-vary

			# Make sure proxies don't deliver the wrong content
			Header append Vary User-Agent env=!dont-vary
		</Location>
	</IfModule>
</IfModule>

<IfModule ssl_module>
	SSLRandomSeed startup builtin
	SSLRandomSeed connect builtin

	SSLPassPhraseDialog	builtin
	SSLSessionCache		shmcb:{{PREFIX}}/var/run/ssl.shmcb

	# enabling this opens up BEAST
	#SSLFIPS		On
</IfModule>

## includes
include conf/httpd.conf.d/*
